(()=>{var t={757:(t,e,n)=>{t.exports=n(666)},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,s=Object.create(i.prototype),a=new N(r||[]);return s._invoke=function(t,e,n){var r=l;return function(i,s){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw s;return x()}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=C(a,n);if(o){if(o===v)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=h(t,e,n);if("normal"===c.type){if(r=n.done?d:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}(t,n,a),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",p="suspendedYield",f="executing",d="completed",v={};function g(){}function y(){}function E(){}var b={};c(b,s,(function(){return this}));var S=Object.getPrototypeOf,T=S&&S(S(L([])));T&&T!==n&&r.call(T,s)&&(b=T);var _=E.prototype=g.prototype=Object.create(b);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){function n(i,s,a,o){var c=h(t[i],t,s);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,o)}),(function(t){n("throw",t,a,o)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,o)}))}o(c.arg)}var i;this._invoke=function(t,r){function s(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(s,s):s()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=h(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:x}}function x(){return{value:e,done:!0}}return y.prototype=E,c(_,"constructor",E),c(E,"constructor",y),y.displayName=c(E,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c(t,o,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},w(m.prototype),c(m.prototype,a,(function(){return this})),t.AsyncIterator=m,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new m(u(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(_),c(_,o,"Generator"),c(_,s,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=L,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=e,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e,n,r,i,s,a){try{var o=t[s](a),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,i)}function r(t){return function(){var n=this,r=arguments;return new Promise((function(i,s){var a=t.apply(n,r);function o(t){e(a,i,s,o,c,"next",t)}function c(t){e(a,i,s,o,c,"throw",t)}o(void 0)}))}}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=n(757),a=n.n(s);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=null,this.eventsLib=window.eventsLib,this.params=window.ts_easy_integration_params,this.registerEvents()}var n,s,o,u,h,l,p,f,d,v,g,y,E,b,S,T,_,w,m,C,O,k,N,L,x,A,R;return n=e,s=[{key:"sendingNotification",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"save";this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.NOTIFICATION,payload:{event:t,status:e,type:n}})}},{key:"getLocaleCallback",value:function(){this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.SET_LOCALE,payload:this.params.locale})}},{key:"getInformationOfSystemCallback",value:function(){this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.SET_INFORMATION_OF_SYSTEM,payload:{nameOfSystem:this.params.name_of_system,versionNumberOfSystem:this.params.version_of_system,versionNumberOfPlugin:this.params.version,allowsEstimatedDeliveryDate:!0,allowsEventsByOrderStatus:!1,allowsSendReviewInvitesForPreviousOrders:!0,allowsSendReviewInvitesForProduct:!0,allowsEditIntegrationCode:!0,allowsSupportWidgets:!0,useVersionNumberOfConnector:"2.0"}})}},{key:"getCredentialsCallback",value:(R=r(a().mark((function t(){var e=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCredentials().then((function(t){e.eventsLib.dispatchAction({action:e.eventsLib.EVENTS.SET_CREDENTIALS_PROVIDED,payload:t})}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return R.apply(this,arguments)})},{key:"saveCredentialsCallback",value:(A=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.client_id=e.payload.clientId,t.client_secret=e.payload.clientSecret,t})).then((function(t){return n.updateSettings(t,!0)})).then((function(){n.sendingNotification(n.eventsLib.EVENTS.SAVE_CREDENTIALS,"success")}));case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SAVE_CREDENTIALS,"error");case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return A.apply(this,arguments)})},{key:"getSalesChannelsCallback",value:function(){this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.SET_SALES_CHANNELS_PROVIDED,payload:this.params.sales_channels})}},{key:"getOrderStatusesCallback",value:function(t){this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.SET_AVAILABLE_ORDER_STATUSES,payload:this.params.order_statuses.hasOwnProperty(t.payload.salesChannelRef)?this.params.order_statuses[t.payload.salesChannelRef]:[]})}},{key:"getMappedChannelsCallback",value:(x=r(a().mark((function t(){var e=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getChannels().then((function(t){e.eventsLib.dispatchAction({action:e.eventsLib.EVENTS.SET_MAPPED_CHANNELS,payload:t})}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"saveMappedChannelsCallback",value:(L=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){var n=t.channels.map((function(t){return t.salesChannelRef+"_"+t.eTrustedChannelRef})),r=e.payload.map((function(t){return t.salesChannelRef+"_"+t.eTrustedChannelRef}));return n.filter((function(t){return r.indexOf(t)<0})).map((function(e){delete t.trustbadges[e],delete t.widgets[e],delete t.used_order_statuses[e]})),t.channels=e.payload,t})).then((function(t){return n.updateSettings(t)})).then((function(){n.getMappedChannelsCallback().then((function(){n.sendingNotification(n.eventsLib.EVENTS.SET_MAPPED_CHANNELS,"success")}))}));case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SET_MAPPED_CHANNELS,"error");case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return L.apply(this,arguments)})},{key:"disconnectCallback",value:(N=r(a().mark((function t(){var e=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.disconnect().then((function(t){e.eventsLib.dispatchAction({action:e.eventsLib.EVENTS.SET_DISCONNECTED,payload:null}),e.settings=null}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SET_DISCONNECTED,"error");case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(){return N.apply(this,arguments)})},{key:"getUniqueId",value:function(t,e){return t+"_"+e}},{key:"getTrustbadgeCallback",value:(k=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTrustbadge(this.getUniqueId(e.payload.salesChannelRef,e.payload.eTrustedChannelRef)).then((function(t){n.eventsLib.dispatchAction({action:n.eventsLib.EVENTS.SET_TRUSTBADGE_CONFIGURATION_PROVIDED,payload:t||{id:"id",children:[]}})}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return k.apply(this,arguments)})},{key:"saveTrustbadgeCallback",value:(O=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.trustbadges[n.getUniqueId(e.payload.salesChannelRef,e.payload.eTrustedChannelRef)]=e.payload,t})).then((function(t){return n.updateSettings(t)})).then((function(){n.getTrustbadgeCallback({payload:e.payload}).then((function(){n.sendingNotification(n.eventsLib.EVENTS.SAVE_TRUSTBADGE_CONFIGURATION,"success")}))}));case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SAVE_TRUSTBADGE_CONFIGURATION,"error");case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return O.apply(this,arguments)})},{key:"getWidgetsCallback",value:(C=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getWidgets(this.getUniqueId(e.payload.salesChannelRef,e.payload.eTrustedChannelRef)).then((function(t){n.eventsLib.dispatchAction({action:n.eventsLib.EVENTS.SET_WIDGET_PROVIDED,payload:t})}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return C.apply(this,arguments)})},{key:"getAdditionalWidgetLocationsCallback",value:function(){this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.SET_LOCATION_FOR_WIDGET,payload:this.params.widget_locations})}},{key:"getUsedOrderStatusesCallback",value:(m=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getUsedOrderStatuses(this.getUniqueId(e.payload.salesChannelRef,e.payload.eTrustedChannelRef)).then((function(t){if(t)n.eventsLib.dispatchAction({action:n.eventsLib.EVENTS.SET_USED_ORDER_STATUSES,payload:{activeStatus:t,id:e.payload.id,eTrustedChannelRef:e.payload.eTrustedChannelRef,salesChannelRef:e.payload.salesChannelRef}});else{var r={name:"checkout",ID:"checkout",event_type:"checkout"};n.eventsLib.dispatchAction({action:n.eventsLib.EVENTS.SET_USED_ORDER_STATUSES,payload:{activeStatus:{service:r,product:r},id:e.payload.id,eTrustedChannelRef:e.payload.eTrustedChannelRef,salesChannelRef:e.payload.salesChannelRef}})}}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"saveUsedOrderStatusesCallback",value:(w=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.used_order_statuses[n.getUniqueId(e.payload.salesChannelRef,e.payload.eTrustedChannelRef)]=e.payload.activeStatus,t})).then((function(t){return n.updateSettings(t)})).then((function(){n.getUsedOrderStatusesCallback({payload:e.payload}).then((function(){n.sendingNotification(n.eventsLib.EVENTS.SAVE_USED_ORDER_STATUSES,"success")}))}));case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SAVE_USED_ORDER_STATUSES,"error");case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return w.apply(this,arguments)})},{key:"saveWidgetsCallback",value:(_=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.widgets[n.getUniqueId(e.payload.salesChannelRef,e.payload.eTrustedChannelRef)]=e.payload,t})).then((function(t){return n.updateSettings(t)})).then((function(){n.getWidgetsCallback({payload:e.payload}).then((function(){n.sendingNotification(n.eventsLib.EVENTS.SAVE_WIDGET_CHANGES,"success")}))}));case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SAVE_WIDGET_CHANGES,"error");case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return _.apply(this,arguments)})},{key:"exportOrdersCallback",value:(T=r(a().mark((function t(e){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.exportOrders(1,e.payload.numberOfDays,e.payload.includeProductData,e.payload.salesChannelRef).then((function(t){var r=document.createElement("a");r.href=t,r.download="orders.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),n.eventsLib.dispatchAction({action:n.eventsLib.EVENTS.SET_EXPORT_PREVIOUS_ORDER,payload:e.payload})}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),this.sendingNotification(e,"error","exportTimeout");case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t){return T.apply(this,arguments)})},{key:"registerEvents",value:(S=r(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.eventsLib.registerEvents((t(n={},this.eventsLib.EVENTS.GET_INFORMATION_OF_SYSTEM,this.getInformationOfSystemCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_LOCALE,this.getLocaleCallback.bind(this)),t(n,this.eventsLib.EVENTS.SAVE_CREDENTIALS,this.saveCredentialsCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_CREDENTIALS_PROVIDED,this.getCredentialsCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_SALES_CHANNELS_PROVIDED,this.getSalesChannelsCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_MAPPED_CHANNELS,this.getMappedChannelsCallback.bind(this)),t(n,this.eventsLib.EVENTS.SAVE_MAPPED_CHANNEL,this.saveMappedChannelsCallback.bind(this)),t(n,this.eventsLib.EVENTS.DISCONNECTED,this.disconnectCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_TRUSTBADGE_CONFIGURATION_PROVIDED,this.getTrustbadgeCallback.bind(this)),t(n,this.eventsLib.EVENTS.SAVE_TRUSTBADGE_CONFIGURATION,this.saveTrustbadgeCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_LOCATION_FOR_WIDGET,this.getAdditionalWidgetLocationsCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_WIDGET_PROVIDED,this.getWidgetsCallback.bind(this)),t(n,this.eventsLib.EVENTS.SAVE_WIDGET_CHANGES,this.saveWidgetsCallback.bind(this)),t(n,this.eventsLib.EVENTS.EXPORT_PREVIOUS_ORDER,this.exportOrdersCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_AVAILABLE_ORDER_STATUSES,this.getOrderStatusesCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_USED_ORDER_STATUSES,this.getUsedOrderStatusesCallback.bind(this)),t(n,this.eventsLib.EVENTS.SAVE_USED_ORDER_STATUSES,this.saveUsedOrderStatusesCallback.bind(this)),n));case 1:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"exportOrders",value:(b=r(a().mark((function t(e,n,r){var i,s,o=this,c=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>3&&void 0!==c[3]?c[3]:"",s=c.length>4&&void 0!==c[4]?c[4]:"",t.next=4,fetch(this.getAjaxUrl("export_orders"),{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({step:e,sales_channel:i,number_of_days:n,include_product_data:r,filename_suffix:s})}).catch((function(){throw new TypeError("Error while exporting orders.")})).then((function(t){return t.json()})).then((function(t){if("done"===t.step)return t.url;if(t.hasOwnProperty("step")&&t.step>e)return o.exportOrders(t.step,t.number_of_days,t.include_product_data,t.sales_channel,t.filename_suffix);throw new TypeError("Error while exporting orders.")})).catch((function(){throw new TypeError("Error while exporting orders.")}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return b.apply(this,arguments)})},{key:"getAjaxUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t+"_nonce"in this.params?this.params[t+"_nonce"]:e;return t="ts_easy_integration_"+t,this.params.ajax_url+"?action="+t+"&security="+n}},{key:"getSettings",value:(E=r(a().mark((function t(){var e,n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.settings){t.next=7;break}return t.next=3,fetch(this.getAjaxUrl("get_settings"),{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({})}).catch((function(){throw new TypeError("Error message")}));case 3:return e=t.sent,t.next=6,e.json().then((function(t){n.settings=t.settings;var r=e.headers.get("Client-Id"),i=e.headers.get("Client-Secret");return n.settings.client_id=null!==r?atob(r):"",n.settings.client_secret=null!==i?atob(i):"",n.settings.trustbadges=c({},n.settings.trustbadges),n.settings.widgets=c({},n.settings.widgets),n.settings.used_order_statuses=c({},n.settings.used_order_statuses),n.settings})).catch((function(){throw new TypeError("Error message")}));case 6:return t.abrupt("return",t.sent);case 7:if(this.settings){t.next=9;break}throw new TypeError("Error message");case 9:return t.abrupt("return",this.settings);case 10:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"updateSettingsData",value:function(t){var e=this.settings?this.settings.client_id:"",n=this.settings?this.settings.client_secret:"",r=t;return r.client_id=e,r.client_secret=n,r}},{key:"disconnect",value:(y=r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.getAjaxUrl("disconnect"),{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({})}).then((function(t){return t.json()})).then((function(t){if(!t.success)throw new TypeError(t.message);return!0})).catch((function(){throw new TypeError("Error while updating settings.")}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"updateSettings",value:(g=r(a().mark((function t(e){var n,r,i,s=this,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],(r=c({},e)).trustbadges=c({},e.trustbadges),r.widgets=c({},e.widgets),r.used_order_statuses=c({},e.used_order_statuses),i={"Content-Type":"application/json;charset=UTF-8"},n||(delete r.client_secret,delete r.client_id),t.next=9,fetch(this.getAjaxUrl("update_settings"),{headers:i,method:"POST",body:JSON.stringify(c({},r))}).then((function(t){return t.json()})).then((function(t){if(!t.success)throw new TypeError(t.message);if(s.settings=s.updateSettingsData(t.settings),!s.settings)throw new TypeError("Error while updating settings.");return s.settings})).catch((function(){throw new TypeError("Error while updating settings.")}));case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"getCredentials",value:(v=r(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={clientId:"",clientSecret:""},t.prev=1,t.next=4,this.getSettings().then((function(t){return{clientId:t.client_id,clientSecret:t.client_secret}}));case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e);case 10:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(){return v.apply(this,arguments)})},{key:"getChannels",value:(d=r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.channels}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",[]);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(){return d.apply(this,arguments)})},{key:"getChannelBySalesRef",value:(f=r(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.channels.filter((function(t){return t.salesChannelRef===e}))[0]}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return f.apply(this,arguments)})},{key:"getChannelById",value:(p=r(a().mark((function t(e,n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.channels.filter((function(t){return t.salesChannelRef===e&&t.eTrustedChannelRef===n}))[0]}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e){return p.apply(this,arguments)})},{key:"getTrustbadge",value:(l=r(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.trustbadges.hasOwnProperty(e)?t.trustbadges[e]:null}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return l.apply(this,arguments)})},{key:"getWidgets",value:(h=r(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.widgets.hasOwnProperty(e)?t.widgets[e]:null}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return h.apply(this,arguments)})},{key:"getUsedOrderStatuses",value:(u=r(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.used_order_statuses.hasOwnProperty(e)?t.used_order_statuses[e]:null}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t){return u.apply(this,arguments)})}],o=[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}],s&&i(n.prototype,s),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e})().Instance})()})();