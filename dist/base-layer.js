(()=>{"use strict";(()=>{function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e,n,i,a,s,r){try{var o=t[s](r),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(i,a)}function n(t){return function(){var n=this,i=arguments;return new Promise((function(a,s){var r=t.apply(n,i);function o(t){e(r,a,s,o,c,"next",t)}function c(t){e(r,a,s,o,c,"throw",t)}o(void 0)}))}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=[{id:"21d3d933eb93",name:"Home Page"},{id:"21d3d933eb93",name:"Footer"}],s={children:[{tag:"script",attributes:{src:{value:"https://integrations.etrusted.site/applications/widget.js/v2",attributeName:"src"},async:{attributeName:"async"},defer:{attributeName:"defer"}},children:[{tag:"etrusted-widget",applicationType:"product_star",widgetId:"wdg-deleted-in-api",widgetLocation:{id:"21d3d933eb93",name:"Footer"},attributes:{id:{value:"wdg-deleted-in-api",attributeName:"data-etrusted-widget-id"},productIdentifier:{attributeName:"data-sku"}}},{tag:"etrusted-widget",applicationType:"product_review_list",widgetId:"wdg-92de735d-6d02-4ccf-941c-9d72d3c0cc46",widgetLocation:{id:"21d3d933eb93",name:"Footer"},extensions:{product_star:{tag:"etrusted-product-review-list-widget-product-star-extension"}},attributes:{id:{value:"wdg-92de735d-6d02-4ccf-941c-9d72d3c0cc46",attributeName:"data-etrusted-widget-id"},productIdentifier:{attributeName:"data-mpn"}}},{tag:"etrusted-widget",applicationType:"product_star",widgetId:"wdg-deleted-in-api-2",widgetLocation:{id:"21d3d933eb93",name:"Footer"},attributes:{id:{value:"wdg-deleted-in-api-2",attributeName:"data-etrusted-widget-id"},productIdentifier:{attributeName:"data-sku"}}},{tag:"etrusted-widget",applicationType:"trusted_stars_service",widgetId:"wdg-52c26016-c3e7-42d5-972b-9851a28809ea",widgetLocation:{id:"21d3d933eb93",name:"Home Page"},attributes:{id:{value:"wdg-52c26016-c3e7-42d5-972b-9851a28809ea",attributeName:"data-etrusted-widget-id"},productIdentifier:{attributeName:"data-gtin"}}},{tag:"etrusted-widget",applicationType:"review_carousel_service",widgetId:"wdg-b893f1f2-c178-4fd8-b067-a66613bc3329",widgetLocation:{id:"21d3d933eb93",name:"Home Page"},attributes:{id:{value:"wdg-b893f1f2-c178-4fd8-b067-a66613bc3329",attributeName:"data-etrusted-widget-id"}}}]}]},r=null;(function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=null,this.eventsLib=window.eventsLib,this.params=window.ts_easy_integration_params,this.registerEvents()}var o,c,E,u,d,l,T,h,p,_,N,b,v,g;return o=e,c=[{key:"sendingNotification",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"save";this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.NOTIFICATION,payload:{event:t,status:e,type:n}})}},{key:"getLocaleCallback",value:function(){this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.SET_LOCALE,payload:this.params.locale})}},{key:"getInformationOfSystemCallback",value:function(){this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.SET_INFORMATION_OF_SYSTEAM,payload:{nameOfSystem:this.params.name_of_system,versionNumberOfSystem:this.params.version_of_system,versionNumberOfPlugin:this.params.version}})}},{key:"getCredentialsCallback",value:(g=n(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCredentials().then((function(t){e.eventsLib.dispatchAction({action:e.eventsLib.EVENTS.SET_CREDENTIALS_PROVIDED,payload:t})}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"saveCredentialsCallback",value:(v=n(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.client_id=e.payload.clientId,t.client_secret=e.payload.clientSecret,t})).then((function(t){return n.updateSettings(t)}));case 3:t.sent,this.sendingNotification(this.eventsLib.EVENTS.SAVE_CREDENTIALS,"success"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SAVE_CREDENTIALS,"error");case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t){return v.apply(this,arguments)})},{key:"getSalesChannelsCallback",value:function(){this.eventsLib.dispatchAction({action:this.eventsLib.EVENTS.SET_SALES_CHANNELS_PROVIDED,payload:this.params.sale_channels})}},{key:"getMappedChannelsCallback",value:(b=n(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getChannels().then((function(t){e.eventsLib.dispatchAction({action:e.eventsLib.EVENTS.SET_MAPPED_CHANNELS,payload:t})}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"saveMappedChannelsCallback",value:(N=n(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.channels=e.payload,t})).then((function(t){return n.updateSettings(t)}));case 3:return t.sent,t.next=6,this.getMappedChannelsCallback().then((function(){n.sendingNotification(n.eventsLib.EVENTS.SET_MAPPED_CHANNELS,"success")}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SET_MAPPED_CHANNELS,"error");case 11:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t){return N.apply(this,arguments)})},{key:"disconnectCallback",value:(_=n(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.disconnect().then((function(t){e.eventsLib.dispatchAction({action:e.eventsLib.EVENTS.SET_DISCONNECTED,payload:null}),e.settings=null}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),this.sendingNotification(this.eventsLib.EVENTS.SET_DISCONNECTED,"error");case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(){return _.apply(this,arguments)})},{key:"registerEvents",value:(p=n(regeneratorRuntime.mark((function e(){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.eventsLib.registerEvents((t(n={},this.eventsLib.EVENTS.GET_INFORMATION_OF_SYSTEAM,this.getInformationOfSystemCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_LOCALE,this.getLocaleCallback.bind(this)),t(n,this.eventsLib.EVENTS.SAVE_CREDENTIALS,this.saveCredentialsCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_CREDENTIALS_PROVIDED,this.getCredentialsCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_SALES_CHANNELS_PROVIDED,this.getSalesChannelsCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_MAPPED_CHANNELS,this.getMappedChannelsCallback.bind(this)),t(n,this.eventsLib.EVENTS.SAVE_MAPPED_CHANNEL,this.saveMappedChannelsCallback.bind(this)),t(n,this.eventsLib.EVENTS.DISCONNECTED,this.disconnectCallback.bind(this)),t(n,this.eventsLib.EVENTS.GET_TRUSTBADGE_CONFIGURATION_PROVIDED,(function(t){console.log("DEMO:GET_TRUSTBADGE_CONFIGURATION_PROVIDED"),setTimeout((function(){var e;i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_TRUSTBADGE_CONFIGURATION_PROVIDED,payload:(e=t.payload.id,{id:e,children:[{tag:"script",attributes:{async:{attributeName:"async"},"data-desktop-y-offset":{value:8,attributeName:"data-desktop-y-offset"},"data-mobile-y-offset":{value:10,attributeName:"data-mobile-y-offset"},"data-desktop-disable-reviews":{value:!1,attributeName:"data-desktop-disable-reviews"},"data-desktop-enable-custom":{value:!1,attributeName:"data-desktop-enable-custom"},"data-desktop-position":{value:"right",attributeName:"data-desktop-position"},"data-desktop-custom-width":{value:156,attributeName:"data-desktop-custom-width"},"data-desktop-enable-fadeout":{value:!1,attributeName:"data-desktop-enable-fadeout"},"data-disable-mobile":{value:!1,attributeName:"data-disable-mobile"},"data-disable-trustbadge":{value:!1,attributeName:"data-disable-trustbadge"},"data-mobile-custom-width":{value:156,attributeName:"data-mobile-custom-width"},"data-mobile-disable-reviews":{value:!1,attributeName:"data-mobile-disable-reviews"},"data-mobile-enable-custom":{value:!1,attributeName:"data-mobile-enable-custom"},"data-mobile-position":{value:"right",attributeName:"data-mobile-position"},charset:{value:"UTF-8",attributeName:"charset"},src:{value:"//widgets.trustedshops.com/js/".concat(e,".js"),attributeName:"src"}}}]})})}),3e3)})),t(n,this.eventsLib.EVENTS.SAVE_TRUSTBADGE_CONFIGURATION,(function(t){console.log("DEMO:SAVE_TRUSTBADGE_CONFIGURATION_BaseLayer",t.payload);try{setTimeout((function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_TRUSTBADGE_CONFIGURATION_PROVIDED,payload:t.payload}),i.sendingNotification(i.eventsLib.EVENTS.SAVE_TRUSTBADGE_CONFIGURATION,"TRUSTBADGE CONFIGURATION SAVED","success")}),3e3)}catch(t){setTimeout((function(){i.sendingNotification(i.eventsLib.EVENTS.SAVE_TRUSTBADGE_CONFIGURATION,"TRUSTBADGE CONFIGURATION NOT SAVED","error")}),400)}})),t(n,this.eventsLib.EVENTS.GET_LOCATION_FOR_WIDGET,(function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_LOCATION_FOR_WIDGET,payload:a})})),t(n,this.eventsLib.EVENTS.GET_WIDGET_PROVIDED,(function(t){setTimeout((function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_WIDGET_PROVIDED,payload:"chl-7e52920a-2722-4881-9908-ecec98c716e4"===t.payload.id?s:{children:[]}})}),3e3)})),t(n,this.eventsLib.EVENTS.SAVE_WIDGET_CHANGES,(function(t){try{console.log("DEMO:SAVE_WIDGET_CHANGES",t.payload),s=t.payload,setTimeout((function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_WIDGET_PROVIDED,payload:s}),i.sendingNotification(i.eventsLib.EVENTS.SAVE_WIDGET_CHANGES,"WIDGET SAVED","success")}),3e3)}catch(t){setTimeout((function(){i.sendingNotification(i.eventsLib.EVENTS.SAVE_WIDGET_CHANGES,"WIDGET NOT SAVED","error")}),400)}})),t(n,this.eventsLib.EVENTS.GET_PRODUCT_REVIEW_FOR_CHANNEL,(function(t){console.log("DEMO:GET_PRODUCT_REVIEW_FOR_CHANNEL",t.payload),setTimeout((function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_PRODUCT_REVIEW_FOR_CHANNEL,payload:null})}),3e3)})),t(n,this.eventsLib.EVENTS.ACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL,(function(t){try{console.log("DEMO:ACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL",t.payload),r=t.payload,setTimeout((function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_PRODUCT_REVIEW_FOR_CHANNEL,payload:r}),i.sendingNotification(i.eventsLib.EVENTS.ACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL,"PRODUCT REVIEW FOR CHANNEL ACTIVATED","success")}),3e3)}catch(t){setTimeout((function(){i.sendingNotification(i.eventsLib.EVENTS.ACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL,"PRODUCT REVIEW FOR CHANNEL NOT ACTIVATED","error")}),400)}})),t(n,this.eventsLib.EVENTS.DEACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL,(function(t){try{console.log("DEMO:DEACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL",t.payload),setTimeout((function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_PRODUCT_REVIEW_FOR_CHANNEL,payload:r}),i.sendingNotification(i.eventsLib.EVENTS.DEACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL,"PRODUCT REVIEW FOR CHANNEL DEACTIVATED","success")}),3e3)}catch(t){setTimeout((function(){i.sendingNotification(i.eventsLib.EVENTS.ACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL,"PRODUCT REVIEW FOR CHANNEL NOT DEACTIVATED","error")}),400)}})),t(n,this.eventsLib.EVENTS.GET_USE_ESTIMATED_DELIVERY_DATE_FOR_CHANNEL,(function(t){console.log("DEMO:GET_USE_ESTIMATED_DELIVERY_DATE_FOR_CHANNEL"),setTimeout((function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_USE_ESTIMATED_DELIVERY_DATE_FOR_CHANNEL,payload:{id:t.payload.id,isUseDateToSendReviewInvites:!0}})}),3e3)})),t(n,this.eventsLib.EVENTS.SAVE_USE_ESTIMATED_DELIVERY_DATE_FOR_CHANNEL,(function(t){try{console.log("DEMO:SAVE_USE_ESTIMATED_DELIVERY_DATE_FOR_CHANNEL",t.payload),setTimeout((function(){i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_USE_ESTIMATED_DELIVERY_DATE_FOR_CHANNEL,payload:t.payload}),i.sendingNotification(i.eventsLib.EVENTS.SAVE_USE_ESTIMATED_DELIVERY_DATE_FOR_CHANNEL,"USE ESTIMATED DELIVERY DATE FOR CHANNEL SAVED","success")}),3e3)}catch(t){setTimeout((function(){i.sendingNotification(i.eventsLib.EVENTS.ACTIVATE_PRODUCT_REVIEW_FOR_CHANNEL,"USE ESTIMATED DELIVERY DATE FOR CHANNEL NOT SAVED","error")}),400)}})),t(n,this.eventsLib.EVENTS.EXPORT_PREVIOUS_ORDER,(function(t){console.log("DEMO:EXPORT_PREVIOUS_ORDER",t.payload),setTimeout((function(){var e=document.createElement("a");e.download="./Brand_Logo_Trusted_Shops.svg";var n=new Blob(["Hello, world!"],{type:"text/plain"});e.href=URL.createObjectURL(n),e.click(),URL.revokeObjectURL(e.href),i.eventsLib.dispatchAction({action:i.eventsLib.EVENTS.SET_EXPORT_PREVIOUS_ORDER,payload:t.payload})}),3e3)})),t(n,this.eventsLib.EVENTS.ERROR,(function(t){return console.log("DEMO:eventError",t)})),n));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getAjaxUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t+"_nonce"in this.params?this.params[t+"_nonce"]:e;return t="ts_easy_integration_"+t,this.params.ajax_url+"?action="+t+"&security="+n}},{key:"getSettings",value:(h=n(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.settings){t.next=11;break}return t.next=3,fetch(this.getAjaxUrl("get_settings"),{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({})}).catch((function(){throw new TypeError("Error message")}));case 3:return e=t.sent,t.next=6,e.json().then((function(t){return t.settings})).catch((function(){throw new TypeError("Error message")}));case 6:this.settings=t.sent,n=e.headers.get("Client-Id"),i=e.headers.get("Client-Secret"),this.settings.client_id=null!==n?atob(n):"",this.settings.client_secret=null!==i?atob(i):"";case 11:if(this.settings){t.next=13;break}throw new TypeError("Error message");case 13:return t.abrupt("return",this.settings);case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"updateSettingsData",value:function(t){var e=this.settings?this.settings.client_id:"",n=this.settings?this.settings.client_secret:"",i=t;return i.client_id=e,i.client_secret=n,i}},{key:"disconnect",value:(T=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.getAjaxUrl("disconnect"),{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify({})}).then((function(t){return t.json()})).then((function(t){if(!t.success)throw new TypeError(t.message);return!0})).catch((function(){throw new TypeError("Error while updating settings.")}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return T.apply(this,arguments)})},{key:"updateSettings",value:(l=n(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.getAjaxUrl("update_settings"),{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){if(!t.success)throw new TypeError(t.message);return n.updateSettingsData(t.settings)})).catch((function(){throw new TypeError("Error while updating settings.")}));case 2:if(this.settings=t.sent,this.settings){t.next=5;break}throw new TypeError("Error while updating settings.");case 5:return t.abrupt("return",this.settings);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"getCredentials",value:(d=n(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={clientId:"",clientSecret:""},t.prev=1,t.next=4,this.getSettings().then((function(t){return{clientId:t.client_id,clientSecret:t.client_secret}}));case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e);case 10:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(){return d.apply(this,arguments)})},{key:"getChannels",value:(u=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSettings().then((function(t){return t.channels}));case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",[]);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(){return u.apply(this,arguments)})}],E=[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}],c&&i(o.prototype,c),E&&i(o,E),Object.defineProperty(o,"prototype",{writable:!1}),e})().Instance})()})();